openapi: 3.0.0
info:
  title: PTX Edge Computing REST-API
  description: The Edge Computing (Decentralized AI processing) BB-02 provides value-added
    services exploiting an underlying distributed edge computing infrastructure.
  contact:
    email: czentye.janos@vik.bme.hu
  version: 0.0.1
externalDocs:
  url: https://github.com/Prometheus-X-association/edge-computing
servers:
  - url: /
tags:
  - name: customerAPI
    description: Customer-facing API (EdgeAPI)
  - name: connectorAPI
    description: Connector-facing API (PrivacyPreservingPDC)
paths:
  /requestEdgeProc:
    post:
      tags:
        - customerAPI
      summary: Execute function on data
      description: ""
      operationId: request_edge_proc
      parameters: [ ]
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExecutionRequestBody'
        required: true
      responses:
        "200":
          description: Successful function deployment
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExecutionResult'
        "403":
          description: Request prohibited by contract/consent
        "404":
          description: Execution request parameters not found
        "408":
          description: Function deployment timeout
        "412":
          description: Undeployable request due to privacy zone restriction
        "500":
          description: Unexpected error
        "503":
          description: Insufficient compute resources or unavailable deployment service
      x-openapi-router-controller: swagger_server.controllers.customer_api_controller
  /requestPrivacyEdgeProc:
    post:
      tags:
        - customerAPI
      summary: Execute function on private data
      description: ""
      operationId: request_privacy_edge_proc
      parameters: [ ]
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PrivateExecutionRequestBody'
        required: true
      responses:
        "200":
          description: Successful function deployment
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrivateExecutionResult'
        "401":
          description: Unauthorized request due to invalid token
        "403":
          description: Request prohibited by contract/consent
        "404":
          description: Execution request parameters not found
        "408":
          description: Function deployment timeout
        "412":
          description: Undeployable request due to privacy zone restriction
        "500":
          description: Unexpected error
        "503":
          description: Insufficient compute resources or unavailable deployment service
      x-openapi-router-controller: swagger_server.controllers.customer_api_controller
components:
  schemas:
    Metadata:
      type: object
      additionalProperties:
        oneOf:
          - type: string
          - type: integer
      description: Arbitrary key-value pairs
      example:
        privacy-zone: zone-A
        CPU-limit: 2
    ExecutionRequestBody:
      required:
        - data
        - data_contract
        - func_contract
        - function
      type: object
      properties:
        function:
          type: string
          description: Unique reference/ID of the function to be applied to the private
            data
          example: FunctionData42
        data:
          type: string
          description: Unique reference/ID of the data
          example: Data42
        data_contract:
          type: string
          description: Unique contract ID
          example: Contract42
        func_contract:
          type: string
          description: Unique contract ID
          example: Contract42
        metadata:
          $ref: '#/components/schemas/Metadata'
      description: Function execution parameters
    PrivateExecutionRequestBody:
      required:
        - consent
        - data_contract
        - func_contract
        - function
        - private_data
        - token
      type: object
      properties:
        function:
          type: string
          description: Unique reference/ID of the function to be applied to the private
            data
          example: FunctionData42
        private_data:
          type: string
          description: Unique reference/ID of the data
          example: Data42
        data_contract:
          type: string
          description: Unique contract ID
          example: Contract42
        func_contract:
          type: string
          description: Unique contract ID
          example: Contract42
        consent:
          type: string
          description: Unique consent ID
          example: Consent42
        token:
          type: string
          description: Unique token created by the DataProvider related to the user's
            consent
          example: Token42
        metadata:
          $ref: '#/components/schemas/Metadata'
      description: Function execution parameters
    ExecutionMetrics:
      type: object
      properties:
        ret:
          maximum: 255
          minimum: 0
          type: integer
          description: Return value of the function
          example: 0
        elapsedTime:
          minimum: 0
          type: integer
          description: Elapsed time of the function
          example: 42
      description: Collected execution metrics
      example:
        ret: 0
        elapsedTime: 42
    ExecutionResult:
      required:
        - data
        - function
        - uuid
      type: object
      properties:
        uuid:
          type: string
          description: Unique operation identifier
          format: uuid
          example: 11111111-2222-3333-4444-555555555555
        function:
          type: string
          description: Unique reference/ID of the function to be applied to the private
            data
          example: FunctionData42
        data:
          type: string
          description: Unique reference/ID of the data
          example: Data42
        metrics:
          $ref: '#/components/schemas/ExecutionMetrics'
      description: The result of the function execution on data
      example:
        data: Data42
        function: FunctionData42
        metrics:
          ret: 0
          elapsedTime: 42
        uuid: 11111111-2222-3333-4444-555555555555
    PrivateExecutionResult:
      required:
        - function
        - private_data
        - uuid
      type: object
      properties:
        uuid:
          type: string
          description: Unique operation identifier
          format: uuid
          example: 11111111-2222-3333-4444-555555555555
        function:
          type: string
          description: Unique reference/ID of the function to be applied to the private
            data
          example: FunctionData42
        private_data:
          type: string
          description: Unique reference/ID of the data
          example: Data42
        metrics:
          $ref: '#/components/schemas/ExecutionMetrics'
      description: The result of the function execution on data
      example:
        private_data: Data42
        function: FunctionData42
        metrics:
          ret: 0
          elapsedTime: 42
        uuid: 11111111-2222-3333-4444-555555555555
  links: { }
  callbacks: { }

