# Swagger generated mock REST-API server

## Overview
This server was generated by the [swagger-codegen](https://github.com/swagger-api/swagger-codegen) project. By using the
[OpenAPI-Spec](https://github.com/swagger-api/swagger-core/wiki) from a remote server, you can easily generate a server stub.  This
is an example of building a swagger-enabled Flask server.

This example uses the [Connexion](https://github.com/zalando/connexion) library on top of Flask.

## Requirements
Python 3.5.2+ (~= Python 3.8.20)

## Preparations
Downgrade packages regarding Python3.8 in the following files:
```pycon
# requirements.txt
flask==1.1.4
markupsafe==2.0.1
connexion>=2.6.0,<3.0
connexion[swagger-ui]>=2.6.0,<3.0
```
```pycon
# test-requirements.txt
flask==1.1.4
markupsafe==2.0.1
#werkzeug<2.0.3
#jinja2<3.1.0
#itsdangerous<2.1.0
```

## Usage
To run the mock server, please execute the following from the root directory:
```bash
$ python3.8 -m pip install -U -r requirements.txt
$ python3.8 -m swagger_server
```

and open your browser to here for the API documentation:
```
http://localhost:8080/ptx-edge/v1/ui/
```

Your OpenAPI definition lives here:
```
http://localhost:8080/ptx-edge/v1/openapi.json
```

## Testing the endpoints
To prepare the integration tests, install tox:
```bash
$ python3.8 -m pip install tox
```

and launch it:
```bash
$ tox
```

For manually executing the test cases defined in
[test_customer_api_controller.py](swagger_server%2Ftest%2Ftest_customer_api_controller.py),
run the following command from the root directory:
```bash
$ nosetests -v
```
or with stdout capturing:
```bash
$ nosetests -v -s
```

For dumping the request/response bodies generated by test cases of a
given test controller, e.g.,
[test_customer_api_controller.py](swagger_server%2Ftest%2Ftest_customer_api_controller.py),
use the following command:
```bash
$ nosetests -v --debug=TestCustomerAPIController
```

## Running with Docker
To run the server on a Docker container, please execute the following from the mockup root directory:

```bash
# building the image
docker build -t ptx-edge-api:1.0 .

# starting up a container
docker run --rm --name ptx-edge-api -p 8080:8080 -it ptx-edge-api:1.0
```