openapi: 3.0.0
info:
  title: Edge Computing REST-API
  description: The Edge Computing (Decentralized AI processing) BB-02 provides value-added
    services exploiting an underlying distributed edge computing infrastructure.
  contact:
    email: czentye.janos@vik.bme.hu
  version: 0.0.1
externalDocs:
  url: https://github.com/Prometheus-X-association/edge-computing
servers:
- url: /
tags:
- name: customerAPI
  description: Customer-facing API (EdgeAPI)
- name: connectorAPI
  description: Connector-facing API (PrivacyPreservingPDC)
paths:
  /requestEdgeProc:
    post:
      tags:
      - customerAPI
      summary: Execute function on data
      description: ""
      operationId: request_edge_proc
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExecutionRequestBody'
        required: true
      responses:
        "200":
          description: Successful function deployment
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExecutionResult'
        "403":
          description: Request prohibited by contract/consent
        "404":
          description: Execution request parameters not found
        "408":
          description: Function deployment timeout
        "412":
          description: Undeployable request due to privacy zone restriction
        "500":
          description: Unexpected error
        "503":
          description: Insufficient compute resources or unavailable deployment service
      x-openapi-router-controller: swagger_server.controllers.customer_api_controller
  /requestPrivacyEdgeProc:
    post:
      tags:
      - customerAPI
      summary: Execute function on private data
      description: ""
      operationId: request_privacy_edge_proc
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PrivateExecutionRequestBody'
        required: true
      responses:
        "200":
          description: Successful function deployment
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrivateExecutionResult'
        "401":
          description: Unauthorized request due to invalid token
        "403":
          description: Request prohibited by contract/consent
        "404":
          description: Execution request parameters not found
        "408":
          description: Function deployment timeout
        "412":
          description: Undeployable request due to privacy zone restriction
        "500":
          description: Unexpected error
        "503":
          description: Insufficient compute resources or unavailable deployment service
      x-openapi-router-controller: swagger_server.controllers.customer_api_controller
components:
  schemas:
    ContractID:
      type: string
      description: Unique contract ID
      example: CONTRACT42
    ConsentID:
      type: string
      description: Unique consent ID
      example: CONSENT42
    FunctionID:
      type: string
      description: Unique reference/ID of the function to be applied to the private
        data
      example: FUNCTIONDATA42
    DataID:
      type: string
      description: Unique reference/ID of the data
      example: DATA42
    AccessToken:
      type: string
      description: Unique token created by the DataProvider related to the user's
        consent
      example: TOKEN42
    ExecutionRequestBody:
      type: object
      properties:
        function:
          $ref: '#/components/schemas/FunctionID'
        data:
          $ref: '#/components/schemas/DataID'
        data_contract:
          $ref: '#/components/schemas/ContractID'
        func_contract:
          $ref: '#/components/schemas/ContractID'
      description: Function execution parameters
    PrivateExecutionRequestBody:
      type: object
      properties:
        function:
          $ref: '#/components/schemas/FunctionID'
        private_data:
          $ref: '#/components/schemas/DataID'
        data_contract:
          $ref: '#/components/schemas/ContractID'
        func_contract:
          $ref: '#/components/schemas/ContractID'
        consent:
          $ref: '#/components/schemas/ConsentID'
        token:
          $ref: '#/components/schemas/AccessToken'
      description: Function execution parameters
    OperationID:
      type: string
      description: Unique operation identifier
      example: 11111111-2222-3333-4444-555555555555
    ExecutionMetrics:
      type: object
      properties:
        ret:
          type: integer
          description: Return value of the function
          example: 0
        elapsedTime:
          type: integer
          description: Elapsed time of the function
          example: 42
      description: Collected execution metrics
      example:
        ret: 0
        elapsedTime: 42
    ExecutionResult:
      required:
      - data
      - function
      - uuid
      type: object
      properties:
        uuid:
          $ref: '#/components/schemas/OperationID'
        function:
          $ref: '#/components/schemas/FunctionID'
        data:
          $ref: '#/components/schemas/DataID'
        metrics:
          $ref: '#/components/schemas/ExecutionMetrics'
      description: The result of the function execution on data
      example:
        data: DATA42
        function: FUNCTIONDATA42
        metrics:
          ret: 0
          elapsedTime: 42
        uuid: 11111111-2222-3333-4444-555555555555
    PrivateExecutionResult:
      required:
      - function
      - private_data
      - uuid
      type: object
      properties:
        uuid:
          $ref: '#/components/schemas/OperationID'
        function:
          $ref: '#/components/schemas/FunctionID'
        private_data:
          $ref: '#/components/schemas/DataID'
        metrics:
          $ref: '#/components/schemas/ExecutionMetrics'
      description: The result of the function execution on data
      example:
        private_data: DATA42
        function: FUNCTIONDATA42
        metrics:
          ret: 0
          elapsedTime: 42
        uuid: 11111111-2222-3333-4444-555555555555
  links: {}
  callbacks: {}

